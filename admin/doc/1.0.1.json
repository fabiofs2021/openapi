{
  "openapi" : "3.0.0",
  "info" : {
    "title" : "APIs Admin do Open Banking Brasil",
    "description" : "As API's administrativas são recursos que podem ser consumidos apenas pelo diretório para avaliação e controle da qualidade dos serviços fornecidos pelas instituições financeiras",
    "contact" : {
      "email" : "apiteam@swagger.io"
    },
    "version" : "1.0.1"
  },
  "servers" : [ {
    "url" : "http://api.banco.com.br/open-banking/admin/v1"
  } ],
  "tags" : [ {
    "name" : "Metrics"
  } ],
  "paths" : {
    "/metrics" : {
      "get" : {
        "tags" : [ "Metrics" ],
        "summary" : "Obtém as métricas de disponibilidade das APIs",
        "description" : "Obtém as métricas de disponibilidade das APIs",
        "operationId" : "getMetrics",
        "parameters" : [ {
          "name" : "page",
          "in" : "query",
          "description" : "Número da página que está sendo requisitada (o valor da primeira página é 1).",
          "required" : false,
          "style" : "form",
          "explode" : true,
          "schema" : {
            "minimum" : 1,
            "type" : "integer",
            "default" : 1
          }
        }, {
          "name" : "page-size",
          "in" : "query",
          "description" : "Quantidade total de registros por páginas.",
          "required" : false,
          "style" : "form",
          "explode" : true,
          "schema" : {
            "minimum" : 1,
            "type" : "integer",
            "default" : 25
          }
        }, {
          "name" : "period",
          "in" : "query",
          "description" : "Período a ser consultado\n  * `CURRENT` - Métricas do dia atual.\n  * `ALL` - Métricas de todo o período disponível.\n",
          "required" : false,
          "style" : "form",
          "explode" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "CURRENT", "ALL" ]
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Dados das métricas",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseMetricsList"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "ResponseMetricsList" : {
        "required" : [ "data", "links" ],
        "type" : "object",
        "properties" : {
          "data" : {
            "$ref" : "#/components/schemas/ResponseMetricsList_data"
          },
          "links" : {
            "$ref" : "#/components/schemas/Links"
          },
          "meta" : {
            "$ref" : "#/components/schemas/Meta"
          }
        }
      },
      "AvailabilityMetrics" : {
        "required" : [ "downtime", "uptime" ],
        "type" : "object",
        "properties" : {
          "uptime" : {
            "$ref" : "#/components/schemas/AvailabilityMetrics_uptime"
          },
          "downtime" : {
            "$ref" : "#/components/schemas/AvailabilityMetrics_downtime"
          }
        }
      },
      "EndpointUptime" : {
        "required" : [ "uptimeRate", "url" ],
        "type" : "object",
        "properties" : {
          "url" : {
            "type" : "string",
            "description" : "URL do endpoint"
          },
          "uptimeRate" : {
            "type" : "string",
            "description" : "Taxa de disponibilidade do endpoint."
          }
        },
        "description" : "Tempos de uptime por endpoint."
      },
      "EndpointDowntime" : {
        "required" : [ "partialDowntime", "url" ],
        "type" : "object",
        "properties" : {
          "url" : {
            "type" : "string",
            "description" : "URL do endpoint"
          },
          "partialDowntime" : {
            "type" : "integer",
            "description" : "Quantidade de segundos de indisponibilidade do endpoint."
          }
        },
        "description" : "Tempos de downtime por endpoint."
      },
      "InvocationMetrics" : {
        "required" : [ "highPriority", "mediumPriority", "unattended", "unauthenticated" ],
        "type" : "object",
        "properties" : {
          "unauthenticated" : {
            "$ref" : "#/components/schemas/InvocationMetrics_unauthenticated"
          },
          "highPriority" : {
            "$ref" : "#/components/schemas/InvocationMetrics_highPriority"
          },
          "mediumPriority" : {
            "$ref" : "#/components/schemas/InvocationMetrics_mediumPriority"
          },
          "unattended" : {
            "$ref" : "#/components/schemas/InvocationMetrics_unattended"
          }
        }
      },
      "AverageMetrics" : {
        "required" : [ "highPriority", "mediumPriority", "unattended", "unauthenticated" ],
        "type" : "object",
        "properties" : {
          "unauthenticated" : {
            "$ref" : "#/components/schemas/AverageMetrics_unauthenticated"
          },
          "highPriority" : {
            "$ref" : "#/components/schemas/AverageMetrics_highPriority"
          },
          "mediumPriority" : {
            "$ref" : "#/components/schemas/AverageMetrics_mediumPriority"
          },
          "unattended" : {
            "$ref" : "#/components/schemas/AverageMetrics_unattended"
          }
        }
      },
      "AverageTPSMetrics" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número médio de chamadas por segundo no dia."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número médio de chamadas por segundo nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        }
      },
      "PeakTPSMetrics" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Pico de chamadas por segundo no dia."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Pico de chamadas por segundo nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        }
      },
      "ErrorMetrics" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas com erro no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas com erro nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        }
      },
      "RejectionMetrics" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas rejeitadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas rejeitadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        }
      },
      "Links" : {
        "type" : "object",
        "properties" : {
          "self" : {
            "type" : "string",
            "description" : "URL da página atualmente requisitada",
            "example" : "https://api.banco.com.br/open-banking/admin/v1/<resource>"
          },
          "first" : {
            "type" : "string",
            "description" : "URL da primeira página de registros",
            "example" : "https://api.banco.com.br/open-banking/admin/v1/<resource>"
          },
          "prev" : {
            "type" : "string",
            "description" : "URL da página anterior de registros"
          },
          "next" : {
            "type" : "string",
            "description" : "URL da próxima página de registros"
          },
          "last" : {
            "type" : "string",
            "description" : "URL da última página de registros",
            "example" : "https://api.banco.com.br/open-banking/admin/v1/<resource>"
          }
        }
      },
      "Meta" : {
        "required" : [ "totalPages", "totalRecords" ],
        "type" : "object",
        "properties" : {
          "totalRecords" : {
            "type" : "integer",
            "description" : "Total de registros encontrados",
            "example" : 1
          },
          "totalPages" : {
            "type" : "integer",
            "description" : "Total de páginas para os registros encontrados",
            "example" : 1
          }
        }
      },
      "ResponseMetricsList_data" : {
        "required" : [ "availability", "averageResponse", "averageTps", "errors", "invocations", "peakTps", "rejections", "requestTime" ],
        "type" : "object",
        "properties" : {
          "requestTime" : {
            "type" : "string",
            "description" : "Data e hora que as métricas foram requisitadas.",
            "format" : "date-time"
          },
          "availability" : {
            "$ref" : "#/components/schemas/AvailabilityMetrics"
          },
          "invocations" : {
            "$ref" : "#/components/schemas/InvocationMetrics"
          },
          "averageResponse" : {
            "$ref" : "#/components/schemas/AverageMetrics"
          },
          "averageTps" : {
            "$ref" : "#/components/schemas/AverageTPSMetrics"
          },
          "peakTps" : {
            "$ref" : "#/components/schemas/PeakTPSMetrics"
          },
          "errors" : {
            "$ref" : "#/components/schemas/ErrorMetrics"
          },
          "rejections" : {
            "$ref" : "#/components/schemas/RejectionMetrics"
          }
        }
      },
      "AvailabilityMetrics_uptime" : {
        "required" : [ "endpoints", "generalUptimeRate" ],
        "type" : "object",
        "properties" : {
          "generalUptimeRate" : {
            "type" : "string",
            "description" : "Taxa de disponibilidade (considerando todos os serviços ativos ao mesmo tempo)."
          },
          "endpoints" : {
            "$ref" : "#/components/schemas/EndpointUptime"
          }
        }
      },
      "AvailabilityMetrics_downtime" : {
        "required" : [ "endpoints", "generalDowntime", "scheduledOutage" ],
        "type" : "object",
        "properties" : {
          "generalDowntime" : {
            "type" : "integer",
            "description" : "Quantidade de segundos de downtime (considerando qualquer api em downtime)."
          },
          "scheduledOutage" : {
            "type" : "integer",
            "description" : "Quantidade de segundos de indisponibilidade agendada."
          },
          "endpoints" : {
            "$ref" : "#/components/schemas/EndpointDowntime"
          }
        }
      },
      "InvocationMetrics_unauthenticated" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas não autenticadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas não autenticadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Número de chamadas não autenticadas."
      },
      "InvocationMetrics_highPriority" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas no dia atual para o nível de alta prioridade."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas nos dias anteriores para o nível de alta prioridade. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Número de chamadas para o nível de alta prioridade."
      },
      "InvocationMetrics_mediumPriority" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas no dia atual para o nível de média prioridade."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas nos dias anteriores para o nível de média prioridade. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Número de chamadas para o nível de média prioridade."
      },
      "InvocationMetrics_unattended" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Número de chamadas no dia atual para o nível não acompanhado."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Número de chamadas nos dias anteriores para o nível não acompanhado. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Número de chamadas para o nível não acompanhado."
      },
      "AverageMetrics_unauthenticated" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Tempo médio de resposta para chamadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Tempo médio de resposta para chamadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Tempo médio de resposta para chamadas não autenticadas."
      },
      "AverageMetrics_highPriority" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Tempo médio de resposta para chamadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Tempo médio de resposta para chamadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Tempo médio de resposta de chamadas para o nível de alta prioridade."
      },
      "AverageMetrics_mediumPriority" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Tempo médio de resposta para chamadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Tempo médio de resposta para chamadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Tempo médio de resposta para chamadas para o nível de média prioridade."
      },
      "AverageMetrics_unattended" : {
        "required" : [ "currentDay", "previousDays" ],
        "type" : "object",
        "properties" : {
          "currentDay" : {
            "type" : "integer",
            "description" : "Tempo médio de resposta para chamadas no dia atual."
          },
          "previousDays" : {
            "type" : "array",
            "description" : "Tempo médio de resposta para chamadas nos dias anteriores. O primeiro item do array é referente a ontem, e assim por diante. Devem ser retornados no máximo sete dias caso estejam disponíveis.",
            "items" : {
              "type" : "integer"
            }
          }
        },
        "description" : "Tempo médio de resposta para chamadas para o nível não acompanhado."
      }
    },
    "parameters" : {
      "page" : {
        "name" : "page",
        "in" : "query",
        "description" : "Número da página que está sendo requisitada (o valor da primeira página é 1).",
        "required" : false,
        "style" : "form",
        "explode" : true,
        "schema" : {
          "minimum" : 1,
          "type" : "integer",
          "default" : 1
        }
      },
      "pageSize" : {
        "name" : "page-size",
        "in" : "query",
        "description" : "Quantidade total de registros por páginas.",
        "required" : false,
        "style" : "form",
        "explode" : true,
        "schema" : {
          "minimum" : 1,
          "type" : "integer",
          "default" : 25
        }
      }
    }
  }
}