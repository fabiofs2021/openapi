{
  "openapi" : "3.0.0",
  "info" : {
    "title" : "API Resources - Open Banking Brasil",
    "description" : "API que trata da consulta do status de recursos para o Open Banking Brasil - Fase 2.\\\nNão possui segregação entre pessoa natural e pessoa jurídica.\n\n# Orientações importantes\n- A API resources lista os recursos vinculados ao consentimento específico, identificado por `consentId` e vinculado ao token enviado no header `Authorization`.\n- Os `STATUS` dos recursos listados DEVEM considerar não apenas o consentimento vinculado mas também a disponibilidade do recurso na instituição transmissora dos dados.\n- Na lista de recursos devolvida na API resources somente constará informação no atributo `resourceId` para recursos com o `STATUS` `AVAILABLE`.\n- Para os demais `STATUS` não é devolvido o identificador do recurso - `resourceId`.\n- A `permission` específica desta API  - `RESOURCES_READ` - DEVE ser solicitada pela instituição receptora na ocasião do pedido de criação do consentimento.\n- A consulta à API Resources não é obrigatória por parte das instituições receptoras - esta API foi criada para dar visibilidade da existência de ocorrências que possam impedir o compartilhamento de determinados recursos por parte da instituição transmissora dos dados.\n- O identificador do recurso devolvido na API Resources - `resourceId` - quando apresentado corresponde ao mesmo identificador designado para o recurso em sua API específica, o seja: o `resourceId` corresponde ao `accountId` da API accounts, ao `creditCardAccountId` da API de conta\npós-paga e assim sucessivamente.\n\n## Status previstos para os recursos listados na API Resources\n- AVAILABLE: indica que o recurso encontra-se disponível e o(s) consentimento(s) associado(s) possui(em) status `AUTHORISED`.\n- UNAVAILABLE: indica que o recurso não está mais disponível, por exemplo, em caso de uma conta encerrada.\n- TEMPORARILY_UNAVAILABLE: indica que o recurso encontra-se temporariamente indisponível, embora o(s) consentimento(s) associado(s) possua(m) status `AUTHORISED`.  \nCaso de exemplo: conta temporariamente bloqueada por suspeita de fraude.\n- PENDING_AUTHORISATION: indica a existência de pendências para o compartilhamento do recurso, por exemplo, em caso de alçada dupla, quando é necessário o consentimento de mais de um titular.\n\n## Permissions necessárias para a API Resources\n### `/resources`\n  - permissions:\n    - GET: **RESOURCES_READ**\n",
    "contact" : {
      "name" : "Governança do Open Banking Brasil – Especificações",
      "url" : "https://openbanking-brasil.github.io/areadesenvolvedor/",
      "email" : "gt-interfaces@openbankingbr.org"
    },
    "license" : {
      "name" : "Apache 2.0",
      "url" : "https://www.apache.org/licenses/LICENSE-2.0"
    },
    "version" : "1.0.0"
  },
  "servers" : [ {
    "url" : "https://api.banco.com.br/open-banking/resources/v1",
    "description" : "Servidor de Produção"
  }, {
    "url" : "https://apih.banco.com.br/open-banking/resources/v1",
    "description" : "Servidor de Homologação"
  } ],
  "tags" : [ {
    "name" : "Resources"
  } ],
  "paths" : {
    "/resources" : {
      "get" : {
        "tags" : [ "Resources" ],
        "summary" : "Obtém a lista de recursos consentidos pelo cliente.",
        "description" : "Método para obter a lista de recursos mantidos pelo cliente na instituição transmissora e para as quais ele tenha fornecido consentimento.",
        "operationId" : "resourcesGetResources",
        "parameters" : [ {
          "name" : "Authorization",
          "in" : "header",
          "description" : "Cabeçalho HTTP padrão. Permite que as credenciais sejam fornecidas dependendo do tipo de recurso solicitado",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "maxLength" : 2048,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string"
          }
        }, {
          "name" : "x-fapi-auth-date",
          "in" : "header",
          "description" : "Data em que o usuário logou pela última vez com o receptor. Representada de acordo com a [RFC7231](https://tools.ietf.org/html/rfc7231).Exemplo: Sun, 10 Sep 2017 19:43:31 UTC",
          "required" : false,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "maxLength" : 29,
            "minLength" : 29,
            "pattern" : "^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \\d{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \\d{4} \\d{2}:\\d{2}:\\d{2} (GMT|UTC)$",
            "type" : "string"
          }
        }, {
          "name" : "x-fapi-customer-ip-address",
          "in" : "header",
          "description" : "O endereço IP do usuário se estiver atualmente logado com o receptor.",
          "required" : false,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "maxLength" : 100,
            "minLength" : 1,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string"
          }
        }, {
          "name" : "x-fapi-interaction-id",
          "in" : "header",
          "description" : "Um UID [RFC4122](https://tools.ietf.org/html/rfc4122) usado como um ID de correlação. Se fornecido, o transmissor deve \"reproduzir\" esse valor no cabeçalho de resposta.",
          "required" : false,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "maxLength" : 100,
            "minLength" : 1,
            "pattern" : "^[a-zA-Z0-9][a-zA-Z0-9\\-]{0,99}$",
            "type" : "string"
          }
        }, {
          "name" : "x-customer-user-agent",
          "in" : "header",
          "description" : "Indica o user-agent que o usuário utiliza.",
          "required" : false,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "maxLength" : 100,
            "minLength" : 1,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string"
          }
        }, {
          "name" : "page",
          "in" : "query",
          "description" : "Número da página que está sendo requisitada (o valor da primeira página é 1).",
          "required" : false,
          "style" : "form",
          "explode" : true,
          "schema" : {
            "minimum" : 1,
            "type" : "integer",
            "format" : "int32",
            "default" : 1
          }
        }, {
          "name" : "page-size",
          "in" : "query",
          "description" : "Quantidade total de registros por páginas.",
          "required" : false,
          "style" : "form",
          "explode" : true,
          "schema" : {
            "maximum" : 1000,
            "minimum" : 1,
            "type" : "integer",
            "format" : "int32",
            "default" : 25
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Dados de status dos recursos obtidos com sucesso.",
            "headers" : {
              "x-fapi-interaction-id" : {
                "style" : "simple",
                "explode" : false,
                "schema" : {
                  "$ref" : "#/components/schemas/XFapiInteractionId"
                }
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseResourceList"
                }
              }
            }
          },
          "400" : {
            "description" : "A requisição foi malformada, omitindo atributos obrigatórios, seja no payload ou através de atributos na URL.",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "401" : {
            "description" : "Cabeçalho de autenticação ausente/inválido ou token inválido",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "403" : {
            "description" : "O token tem escopo incorreto ou uma política de segurança foi violada",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "404" : {
            "description" : "O recurso solicitado não existe ou não foi implementado",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "405" : {
            "description" : "O consumidor tentou acessar o recurso com um método não suportado",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "406" : {
            "description" : "A solicitação continha um cabeçalho Accept diferente dos tipos de mídia permitidos ou um conjunto de caracteres diferente de UTF-8",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "429" : {
            "description" : "A operação foi recusada, pois muitas solicitações foram feitas dentro de um determinado período ou o limite global de requisições concorrentes foi atingido",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "500" : {
            "description" : "Ocorreu um erro no gateway da API ou no microsserviço",
            "content" : {
              "application/json; charset=utf-8" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseError"
                }
              }
            }
          },
          "default" : {
            "description" : "Dados de status dos recursos obtidos com sucesso.",
            "headers" : {
              "x-fapi-interaction-id" : {
                "style" : "simple",
                "explode" : false,
                "schema" : {
                  "$ref" : "#/components/schemas/XFapiInteractionId"
                }
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ResponseResourceList"
                }
              }
            }
          }
        },
        "security" : [ {
          "OpenId" : [ "openid" ],
          "OAuth2Security" : [ "consent:consentId", "resources" ]
        } ]
      }
    }
  },
  "components" : {
    "schemas" : {
      "ResponseResourceList" : {
        "required" : [ "data", "links", "meta" ],
        "type" : "object",
        "properties" : {
          "data" : {
            "minItems" : 1,
            "type" : "array",
            "description" : "Lista de recursos e seus respectivos status.",
            "items" : {
              "$ref" : "#/components/schemas/ResponseResourceList_data"
            }
          },
          "links" : {
            "$ref" : "#/components/schemas/Links"
          },
          "meta" : {
            "$ref" : "#/components/schemas/Meta"
          }
        },
        "additionalProperties" : false
      },
      "Links" : {
        "required" : [ "self" ],
        "type" : "object",
        "properties" : {
          "self" : {
            "maxLength" : 2000,
            "pattern" : "^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)$",
            "type" : "string",
            "description" : "URI completo que gerou a resposta atual.",
            "format" : "uri",
            "example" : "https://api.banco.com.br/open-banking/api/v1/resource"
          },
          "first" : {
            "maxLength" : 2000,
            "pattern" : "^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)$",
            "type" : "string",
            "description" : "URI da primeira página que originou essa lista de resultados. Restrição - Obrigatório quando não for a primeira página da resposta",
            "format" : "uri",
            "example" : "https://api.banco.com.br/open-banking/api/v1/resource"
          },
          "prev" : {
            "maxLength" : 2000,
            "pattern" : "^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)$",
            "type" : "string",
            "description" : "URI da página anterior dessa lista de resultados. Restrição - \tObrigatório quando não for a primeira página da resposta",
            "format" : "uri",
            "example" : "https://api.banco.com.br/open-banking/api/v1/resource"
          },
          "next" : {
            "maxLength" : 2000,
            "pattern" : "^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)$",
            "type" : "string",
            "description" : "URI da próxima página dessa lista de resultados. Restrição - Obrigatório quando não for a última página da resposta",
            "format" : "uri",
            "example" : "https://api.banco.com.br/open-banking/api/v1/resource"
          },
          "last" : {
            "maxLength" : 2000,
            "pattern" : "^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)$",
            "type" : "string",
            "description" : "URI da última página dessa lista de resultados. Restrição - Obrigatório quando não for a última página da resposta",
            "format" : "uri",
            "example" : "https://api.banco.com.br/open-banking/api/v1/resource"
          }
        },
        "additionalProperties" : false,
        "description" : "Referências para outros recusos da API requisitada."
      },
      "Meta" : {
        "required" : [ "requestDateTime", "totalPages", "totalRecords" ],
        "type" : "object",
        "properties" : {
          "totalRecords" : {
            "type" : "integer",
            "description" : "Número total de registros no resultado",
            "format" : "int32",
            "example" : 1
          },
          "totalPages" : {
            "type" : "integer",
            "description" : "Número total de páginas no resultado",
            "format" : "int32",
            "example" : 1
          },
          "requestDateTime" : {
            "maxLength" : 20,
            "type" : "string",
            "description" : "Data e hora da consulta, conforme especificação RFC-3339, formato UTC.",
            "format" : "date-time",
            "example" : "2021-05-21T08:30:00Z"
          }
        },
        "additionalProperties" : false,
        "description" : "Meta informações referente a API requisitada."
      },
      "ResponseError" : {
        "required" : [ "errors" ],
        "type" : "object",
        "properties" : {
          "errors" : {
            "maxItems" : 13,
            "minItems" : 1,
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/ResponseError_errors"
            }
          },
          "meta" : {
            "$ref" : "#/components/schemas/Meta"
          }
        },
        "additionalProperties" : false
      },
      "XFapiInteractionId" : {
        "maxLength" : 100,
        "pattern" : "^[a-zA-Z0-9][a-zA-Z0-9\\-]{0,99}$",
        "type" : "string",
        "description" : "Um UID [RFC4122](https://tools.ietf.org/html/rfc4122) usado como um ID de correlação. Se fornecido, o transmissor deve \"reproduzir\" esse valor no cabeçalho de resposta."
      },
      "ResponseResourceList_data" : {
        "required" : [ "status", "type" ],
        "type" : "object",
        "properties" : {
          "resourceId" : {
            "maxLength" : 100,
            "minLength" : 1,
            "pattern" : "^[a-zA-Z0-9][a-zA-Z0-9\\-]{0,99}$",
            "type" : "string",
            "description" : "Identifica o recurso reportado pelo participante do Open Banking, no caso de:\nContas de depósito à vista, de poupança ou de pagamento pré-paga : corresponde ao accountId;\nConta de pagamento pós-paga: corresponde ao creditCardAccountId;\nEmpréstimos, Financiamentos, Direitos creditórios descontados e Adiantamento a depositantes: corresponde ao contractId.\n",
            "example" : "25cac914-d8ae-6789-b215-650a6215820d"
          },
          "type" : {
            "type" : "string",
            "description" : "Tipo de recurso (vide Enum):\nAccount - Conta de depósito à vista, poupança ou pagamento pré-paga\nCredit Card Account - Conta de pagamento pós-paga (Cartão de Crédito)\nLoan - Empréstimo\nFinancing - Financiamento\nUnarranged Account Overdraft - Cheque Especial\nInvoice Financing - Financiamento de Fatura\n",
            "example" : "ACCOUNT",
            "enum" : [ "ACCOUNT", "CREDIT_CARD_ACCOUNT", "LOAN", "FINANCING", "UNARRANGED_ACCOUNT_OVERDRAFT", "INVOICE_FINANCING" ]
          },
          "status" : {
            "type" : "string",
            "description" : "Tipo de status de recurso (vide Enum):\nAvailable - Disponível\nUnavailable - Indisponível\nTemporarily Unavailable - Temporariamente Indisponível\nPending Authorisation - Pendente de Autorização\n",
            "example" : "AVAILABLE",
            "enum" : [ "AVAILABLE", "UNAVAILABLE", "TEMPORARILY_UNAVAILABLE", "PENDING_AUTHORISATION" ]
          }
        },
        "additionalProperties" : false
      },
      "ResponseError_errors" : {
        "required" : [ "code", "detail", "title" ],
        "type" : "object",
        "properties" : {
          "code" : {
            "maxLength" : 255,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string",
            "description" : "Código de erro específico do endpoint"
          },
          "title" : {
            "maxLength" : 255,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string",
            "description" : "Título legível por humanos deste erro específico"
          },
          "detail" : {
            "maxLength" : 2048,
            "pattern" : "[\\w\\W\\s]*",
            "type" : "string",
            "description" : "Descrição legível por humanos deste erro específico"
          }
        },
        "additionalProperties" : false
      }
    },
    "responses" : {
      "OKResponseResourceList" : {
        "description" : "Dados de status dos recursos obtidos com sucesso.",
        "headers" : {
          "x-fapi-interaction-id" : {
            "style" : "simple",
            "explode" : false,
            "schema" : {
              "$ref" : "#/components/schemas/XFapiInteractionId"
            }
          }
        },
        "content" : {
          "application/json" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseResourceList"
            }
          }
        }
      },
      "BadRequest" : {
        "description" : "A requisição foi malformada, omitindo atributos obrigatórios, seja no payload ou através de atributos na URL.",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "Forbidden" : {
        "description" : "O token tem escopo incorreto ou uma política de segurança foi violada",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "InternalServerError" : {
        "description" : "Ocorreu um erro no gateway da API ou no microsserviço",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "MethodNotAllowed" : {
        "description" : "O consumidor tentou acessar o recurso com um método não suportado",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "NotAcceptable" : {
        "description" : "A solicitação continha um cabeçalho Accept diferente dos tipos de mídia permitidos ou um conjunto de caracteres diferente de UTF-8",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "NotFound" : {
        "description" : "O recurso solicitado não existe ou não foi implementado",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "TooManyRequests" : {
        "description" : "A operação foi recusada, pois muitas solicitações foram feitas dentro de um determinado período ou o limite global de requisições concorrentes foi atingido",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      },
      "Unauthorized" : {
        "description" : "Cabeçalho de autenticação ausente/inválido ou token inválido",
        "content" : {
          "application/json; charset=utf-8" : {
            "schema" : {
              "$ref" : "#/components/schemas/ResponseError"
            }
          }
        }
      }
    },
    "parameters" : {
      "Authorization" : {
        "name" : "Authorization",
        "in" : "header",
        "description" : "Cabeçalho HTTP padrão. Permite que as credenciais sejam fornecidas dependendo do tipo de recurso solicitado",
        "required" : true,
        "style" : "simple",
        "explode" : false,
        "schema" : {
          "maxLength" : 2048,
          "pattern" : "[\\w\\W\\s]*",
          "type" : "string"
        }
      },
      "page" : {
        "name" : "page",
        "in" : "query",
        "description" : "Número da página que está sendo requisitada (o valor da primeira página é 1).",
        "required" : false,
        "style" : "form",
        "explode" : true,
        "schema" : {
          "minimum" : 1,
          "type" : "integer",
          "format" : "int32",
          "default" : 1
        }
      },
      "pageSize" : {
        "name" : "page-size",
        "in" : "query",
        "description" : "Quantidade total de registros por páginas.",
        "required" : false,
        "style" : "form",
        "explode" : true,
        "schema" : {
          "maximum" : 1000,
          "minimum" : 1,
          "type" : "integer",
          "format" : "int32",
          "default" : 25
        }
      },
      "xCustomerUserAgent" : {
        "name" : "x-customer-user-agent",
        "in" : "header",
        "description" : "Indica o user-agent que o usuário utiliza.",
        "required" : false,
        "style" : "simple",
        "explode" : false,
        "schema" : {
          "maxLength" : 100,
          "minLength" : 1,
          "pattern" : "[\\w\\W\\s]*",
          "type" : "string"
        }
      },
      "xFapiAuthDate" : {
        "name" : "x-fapi-auth-date",
        "in" : "header",
        "description" : "Data em que o usuário logou pela última vez com o receptor. Representada de acordo com a [RFC7231](https://tools.ietf.org/html/rfc7231).Exemplo: Sun, 10 Sep 2017 19:43:31 UTC",
        "required" : false,
        "style" : "simple",
        "explode" : false,
        "schema" : {
          "maxLength" : 29,
          "minLength" : 29,
          "pattern" : "^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \\d{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \\d{4} \\d{2}:\\d{2}:\\d{2} (GMT|UTC)$",
          "type" : "string"
        }
      },
      "xFapiCustomerIpAddress" : {
        "name" : "x-fapi-customer-ip-address",
        "in" : "header",
        "description" : "O endereço IP do usuário se estiver atualmente logado com o receptor.",
        "required" : false,
        "style" : "simple",
        "explode" : false,
        "schema" : {
          "maxLength" : 100,
          "minLength" : 1,
          "pattern" : "[\\w\\W\\s]*",
          "type" : "string"
        }
      },
      "xFapiInteractionId" : {
        "name" : "x-fapi-interaction-id",
        "in" : "header",
        "description" : "Um UID [RFC4122](https://tools.ietf.org/html/rfc4122) usado como um ID de correlação. Se fornecido, o transmissor deve \"reproduzir\" esse valor no cabeçalho de resposta.",
        "required" : false,
        "style" : "simple",
        "explode" : false,
        "schema" : {
          "maxLength" : 100,
          "minLength" : 1,
          "pattern" : "^[a-zA-Z0-9][a-zA-Z0-9\\-]{0,99}$",
          "type" : "string"
        }
      }
    },
    "securitySchemes" : {
      "OpenId" : {
        "type" : "openIdConnect",
        "openIdConnectUrl" : "https://auth.mockbank.poc.raidiam.io/.well-known/openid-configuration"
      },
      "OAuth2Security" : {
        "type" : "oauth2",
        "description" : "Fluxo OAuth necessário para que a receptora tenha acesso aos dados na instituição transmissora. Requer o processo de redirecionamento e autenticação do usuário a que se referem os dados.",
        "flows" : {
          "authorizationCode" : {
            "authorizationUrl" : "https://authserver.example/authorization",
            "tokenUrl" : "https://authserver.example/token",
            "scopes" : {
              "resources" : "Escopo necessário para acesso à API Resources. O controle dos endpoints específicos é feito via permissions."
            }
          }
        }
      }
    }
  }
}